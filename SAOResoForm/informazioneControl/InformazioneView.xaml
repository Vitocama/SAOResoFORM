<Window x:Class="SAOResoForm.informazioneControl.InformazioneView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="INSERIMENTO DEGLI ATTESTATI" Height="600" Width="1400">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="50"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="553*"/>
            <ColumnDefinition Width="377*"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="465*"/>
        </Grid.ColumnDefinitions>

        <!-- TITOLO -->
        <TextBlock 
                   Grid.ColumnSpan="2"
                   Text="VISUALIZZA DATABASE INFORMAZIONE" 
                   FontSize="20" 
                   FontWeight="Bold"
                   HorizontalAlignment="Left" 
                   VerticalAlignment="Center" Margin="510,0,0,0"/>

        <!-- RICERCA E CONTATORE -->
        <Grid Grid.Row="1" Grid.Column="0" Margin="10,10,10,10" Grid.ColumnSpan="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0"
                       Text="Cerca Personale:" 
                       VerticalAlignment="Center" 
                       FontWeight="Bold" 
                       Margin="0,0,10,0"/>

            <TextBox Grid.Column="1"
                     Text="{Binding FiltroRicerca, UpdateSourceTrigger=PropertyChanged}"
                     VerticalAlignment="Center"
                     Height="30"
                     Padding="5"/>

            <TextBlock Grid.Column="3"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       FontWeight="Bold"
                       Foreground="#2C3E50"
                       Margin="10,0,0,0">
                <Run Text="Elementi visualizzati: "/>
                <Run Text="{Binding FilteredPersonaleList.Count, Mode=OneWay}"/>
                <Run Text=" / "/>
                <Run Text="{Binding TotalePersonale, Mode=OneWay}"/>
            </TextBlock>
        </Grid>

        <!-- TITOLO LISTBOX -->
        <TextBlock Grid.Row="1" 
                   Grid.Column="3"
                   Text="Personale Selezionato" 
                   FontWeight="Bold"
                   FontSize="14"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"/>

        <!-- DATAGRID CON CHECKBOX -->
        <DataGrid Grid.Row="2"
                  Grid.Column="0"
                  ItemsSource="{Binding FilteredPersonaleList}"
                  AutoGenerateColumns="False"
                  SelectionMode="Single"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  Margin="10,10,10,10" Grid.ColumnSpan="2">
            <DataGrid.Columns>
                <!-- CHECKBOX -->
                <DataGridCheckBoxColumn Header="SELEZIONATI" 
                                        Binding="{Binding IsSelected, UpdateSourceTrigger=PropertyChanged}" 
                                        Width="120"/>

                <DataGridTextColumn Header="ID" 
                            Binding="{Binding Id}" 
                            Width="Auto"
                            IsReadOnly="True"/>

                <DataGridTextColumn Header="Cognome" 
                            Binding="{Binding Cognome}" 
                            Width="*"
                            IsReadOnly="True"/>

                <DataGridTextColumn Header="Nome" 
                            Binding="{Binding Nome}" 
                            Width="*"
                            IsReadOnly="True"/>

                <DataGridTextColumn Header="Matricola" 
                            Binding="{Binding Matricola}" 
                            Width="*"
                            IsReadOnly="True"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- SEPARATORE -->
        <GridSplitter Grid.Row="2" 
                      Grid.Column="2"
                      Width="5"
                      HorizontalAlignment="Stretch"
                      Background="LightGray"/>

        <!-- LISTBOX PERSONALE INSERITO -->
        <Grid Grid.Row="2" Grid.Column="3" Margin="10,10,10,10">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- LISTBOX -->
            <ListBox Grid.Row="0"
                     x:Name="PersonaleListBox"
                     ItemsSource="{Binding PersonaleInserito}"
                     SelectionMode="Single">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock>
                            <Run Text="{Binding Cognome}"/>
                            <Run Text="_"/>
                            <Run Text="{Binding Nome}"/>
                            <Run Text="_"/>
                            <Run Text="{Binding Matricola}"/>
                        </TextBlock>
                    </DataTemplate>
                </ListBox.ItemTemplate>
                <ListBox.ItemContainerStyle>
                    <Style TargetType="ListBoxItem">
                        <Setter Property="Foreground" Value="Black"/>

                        <!-- Testo nero anche quando selezionato -->
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Foreground" Value="Black"/>
                                <Setter Property="Background" Value="#BBDEFB"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </ListBox.ItemContainerStyle>
            </ListBox>

            <!-- PULSANTE RIMUOVI SELEZIONATO -->
            <Button Grid.Row="1"
                    Content="✕ Rimuovi Selezionato"
                    Command="{Binding RimuoviPersonaleCommand}"
                    CommandParameter="{Binding SelectedItem, ElementName=PersonaleListBox}"
                    Height="30"
                    Margin="0,5,0,5"
                    Background="#E67E22"
                    Foreground="White"
                    FontWeight="Bold"/>

            <!-- CONTATORE -->
            <TextBlock Grid.Row="2"
                       HorizontalAlignment="Center"
                       FontWeight="Bold"
                       Foreground="#27AE60"
                       Margin="0,5,0,0">
                <Run Text="Totale inseriti: "/>
                <Run Text="{Binding PersonaleInserito.Count, Mode=OneWay}"/>
            </TextBlock>
        </Grid>

        <!-- PULSANTI AZIONI -->
        <StackPanel Grid.Row="3" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Left" 
                    Margin="67,10,0,10" Grid.ColumnSpan="2">

            <!-- PULSANTE AGGIUNGI SELEZIONATI -->
            <Button Content="Aggiungi Selezionati ►"
                    Command="{Binding AggiungiSelezionatiCommand}"
                    Width="180"
                    Height="35"
                    Margin="5"
                    Background="#3498DB"
                    Foreground="White"
                    FontWeight="Bold"/>

            <!-- PULSANTE PULISCI -->
            <Button Content="Pulisci Selezione"
                    Command="{Binding PulisciSelezioneCommand}"
                    Width="150"
                    Height="35"
                    Margin="5"
                    Background="#E74C3C"
                    Foreground="White"
                    FontWeight="Bold"/>

            <!-- PULSANTE CREA ATTESTATO -->
            <Button Content="📄 Crea Attestato"
                    Command="{Binding CreaAttestatoCommand}"
                    Width="170"
                    Height="35"
                    Margin="5"
                    Background="#27AE60"
                    Foreground="White"
                    FontWeight="Bold"/>
        </StackPanel>
    </Grid>
</Window>